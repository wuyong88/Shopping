<!doctype html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="x-ua-compatible" content="ie=8" />
<title>Bombin男装商城列表</title>
<link rel="stylesheet" type="text/css" href="__HOME__/css/common.css">
<link rel="stylesheet" type="text/css" href="__HOME__/css/header.css">
<link rel="stylesheet" type="text/css" href="__HOME__/css/nanzhuang.css">
<link rel="stylesheet" type="text/css" href="__HOME__/css/footer.css">
<script src="__HOME__/js/jquery-1.8.3.min.js"></script>
</head>

<body>
<!--顶部开始-->
<div class="header">
	<div class="top"><!--顶部导航栏-->
		<div class="topnav">
			<ul class="left"><!--顶部左边-->
				<li class="li01"><a href="javascript:vido(0);">收藏红豆</a></li>
				<li class="li02"><a href="javascript:vido(0);">关注微博</a></li>
				<li class="li03"><a href="javascript:vido(0);">手机商城</a></li>
				<li class="li04"><a href="javascript:vido(0);">咨询电话:</a><span>400-602-1112</span></li>
				<p class="cle"></p>
			</ul>
			     <ul class="right"><!--顶部右边-->

        <div>{$Think.session.user_info_home.mobile|default="亲"}，欢迎来到Bombin男装商城！</div>

                {if !$Think.session.user_info_home}
        <li><a href="{:url('login/login')}">【登陆】</a></li>
        <li><a href="{:url('login/regsiter')}">【注册】</a></li>
                {else}
                <li><a href="{:url('login/loginOut')}">【退出】</a></li>
                {/if}

        <li id="My"><a href="member.html">我的Bombin ∨</a></li>
        <li class="help"><a href="javascript:vido(0);">帮助中心</a></li>
        <p class="cle"></p>
      </ul>
			<p class="cle"></p>
		</div>
	</div>	
	<div class="mid"><!--顶部内容区-->
		<div class="box">
			<div class="logo">
                <a href="index.html">
                    <img src="__HOME__/images/logo.png">Bombin男装商城
                </a>
            </div>
			<div class="right">
				<div class="search">
				<form action="" method="">
					<input class="text" type="text" size="20" />
					<button>搜索</button>
				</form>							
				</div>				
				<div class="gwc">
					<a href="shopping.html">我的购物车</a>
					<div id="number">0</div>
				</div>
				<p class="cle"></p>
				<ul class="hot">
					<li class="li01"><a href="javascript:vido(0);">衬衫</a></li>
					<li class="li02"><a href="javascript:vido(0);">外套</a></li>
					<li class="li03"><a href="javascript:vido(0);">童装</a></li>
					<li class="li04"><a href="javascript:vido(0);">秋季热卖</a></li>
					<li class="li05"><a href="javascript:vido(0);">红豆杉</a></li>
				</ul>
			</div>
		</div>
		<div class="nav"><!--导航栏-->
			<div id="all">
				<a href="javascript:vido(0);">全部商品分类<span>∨</span></a>
				<ul id="leftsidebar">
					<li class="li01">
						男装
						<div>
						<a class="a01" href="javascript:vido(0);">衬衫</a>
						<a href="javascript:vido(0);">羽绒服</a>
						<a href="javascript:vido(0);">毛衫</a>
						</div>
					</li>
					<li class="li02">
						居家
						<div>
						<a class="a01" href="javascript:vido(0);">家居服</a>
						<a href="javascript:vido(0);">短裤</a>
						<a href="javascript:vido(0);">四角裤</a>
						</div>
					</li>
					<li class="li03">
						童装
						<div>
						<a class="a01" href="javascript:vido(0);">男童</a>
						<a href="javascript:vido(0);">女童</a>
						<a href="javascript:vido(0);">婴童</a>
						</div>
					</li>
					<li class="li04">
						红豆杉
						<div>
						<a class="a01" href="javascript:vido(0);">红豆杉</a>
						<a href="javascript:vido(0);"> </a>
						<a href="javascript:vido(0);">园林衫</a>
						</div>
					</li>
					<li class="li05">
						配饰
						<div>
						<a class="a01" href="javascript:vido(0);">皮带</a>
						<a href="javascript:vido(0);">项链</a>
						<a href="javascript:vido(0);">鞋带</a>
						</div>
					</li>
					<li class="li06">
						套装
						<div>
						<a class="a01" href="javascript:vido(0);">套装</a>
						<a href="javascript:vido(0);">半套装</a>
						</div>
					</li>
					<li class="li07">
						季节款式
						<div>
						<a class="a01" href="javascript:vido(0);">夏季</a>
						<a href="javascript:vido(0);">冬季</a>
						<a href="javascript:vido(0);">秋季</a>
						</div>
					</li>
					<li class="li08">
						明星同款
						<div>
						<a class="a01" href="javascript:vido(0);">黄晓明</a>
						<a class="a01" href="javascript:vido(0);">杨毅</a>
						<a class="a01" href="javascript:vido(0);">赵薇</a>
						</div>
					</li>
				</ul>
			</div>
			<ul>
				<li><a href="index.html">首页</a></li>
				<li><a href="nanzhuang.html">男装</a></li>
				<li><a href="javascript:vido(0);">专柜同步</a></li>
				<li><a href="javascript:vido(0);">居家</a></li>
				<li><a href="javascript:vido(0);">家纺</a></li>
				<li><a href="javascript:vido(0);">童装</a></li>
				<li><a href="javascript:vido(0);">女装</a></li>
				<li><a href="javascript:vido(0);">红豆杉</a></li>
				<li><a href="javascript:vido(0);">配饰</a></li>
				<li><a href="javascript:vido(0);">特色购</a></li>
				<p class="cle"></p>
			</ul>
			<p class="cle"></p>
		</div>
	</div>	
</div>
<!--顶部结束-->

<!--中间开始-->
<div class="content">
  <h1>当前位置：<a href="index.html">首页</a>><a href="javascript:vido(0);">商品分类</a>><a href="nanzhuang.html">男装</a></h1>
  <div class="yxz">
  	 
	<div class="cle"></div>
  </div>
  <div class="pp">
  	<div class="wz">品牌：</div>
    <ul id="pp">		
		<li><img src="__HOME__/images/pinpai1.gif"/></li>
		<li><img src="__HOME__/images/pinpai2.gif"/></li>
		<li><img src="__HOME__/images/pinpai3.gif"/></li>
		<li><img src="__HOME__/images/pinpai4.gif"/></li>
		<li><img src="__HOME__/images/pinpai5.gif"/></li>
		<div class="cle"></div>


		 
    {foreach $spec_data as $k=>$v}

     {if $k eq 0}
    <div style="border-top:1px solid #cdcdcd;">
    {/if}

    {if $k%2 neq 0 and $k+1 neq count($spec_data)}
    <div class="hr">
    {/if}

		<p class="wz">{$v.spec_name}：</p>
  		{foreach $v.child as $value}
  		<li data-id="{$value.id}" class="spec">{$value.spec_value}</li>
       {/foreach}
		<div class="cle"></div>

    {if $k%2 neq 0 and $k+1 neq count($spec_data)}
    </div>
     {/if}

    {if $k eq 0}
    </div>
    {/if}

     {/foreach}
 
     <script>
        $(function(){
            var arr = []
            var index = []
            $('.spec').click(function(){
              
              var data = $(this).data()
              _data = data
              arr.push(data.id)
             
             
              var num=0;
              
              //循环数组【规格值id】，判断点击的规格值id是不是在里面
              //累计两次，保留他们各自的位置索引  找位置的方法
              //遍历数组，去除     去重的方法
              for (var i = 0; i < arr.length; i++) {
                if(arr[i] == data.id){
                  num++;
                  if(num > 1){
                    index.push(i)
                    break;
                  } 
                }
              }


              if(index.length == 1){
                 index.push(arr.indexOf(data.id))
                 for (var i=0; i <index.length; i++) {
                  arr.splice(index[i],1)
                }
                index=[]
              }
 
              
              //arr.split() 字符串转组
              //arr.join() 数组转字符串
              str = arr.join('_')
              
              //js与php变量之间的交互

              var url ="{:url('GoodsDetail/index',$param)}"+'?spec_value_id='+str
 
               $.post(url, function(data){
                  //替换商品
                  //替换分页
    

                var page_str = '<input type="text" name="page" value="1"/><span>页</span><input class="button" type="submit" name="confirm" value="确认">'
                $('.submenu').html(data.page+page_str)


    var goods_str = '';
    for (var i=0; i < data.data.data.length; i++) {
   
      
     goods_str += '<li>'

     var url = "{:url('goods/detail')}"+'?id='+data.data.data[i].id
     goods_str += '<a href="'+url+'"><img '

     if(data.data.data[i].aaa == ''){
        goods_str += 'src="https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1593836702053&di=b0e958705fc094e26c746e8335afe48b&imgtype=0&src=http%3A%2F%2Fku.90sjimg.com%2Felement_origin_min_pic%2F17%2F07%2F19%2Fdc16de991c0edd8a740b2bd8c45fd0db.jpg"'
     }else{
        goods_str += 'src="__UP__/'+data.data.data[i].aaa+'"'
     }
     

      goods_str += '  width="282" height="279"/></a>'
      goods_str += '<p>'
      goods_str += '<span class="s1">￥'+data.data.data[i].goods_price+'</span>'
      goods_str += '<span class="s2">￥'+data.data.data[i].goods_price+'</span>'
      goods_str += '<span class="s3">最近交易9笔</span>'
      goods_str += '</p>'
     goods_str += '<p class="p1">'+data.data.data[i].goods_name+'</p>'
     goods_str += '</li>'
   }

    goods_str += '<div class="cle"></div>'


                console.log(goods_str)
                $('.goods_list').html(goods_str);

                //点击了当前规格，默认红色，再点击去掉红色
                // if(arr.indexOf(_data.id)){

                // }
              },'json')
            })
        })


        // 控制器：
        //   收到后，添加order by 销量倒叙或正序
        // <销量标签 data-id='0'>
        // $('销量的选择器').click(function(){
        //   $('销量的选择器').data('id')
        //   $.post('商品列表页?销量=1', function(){
        //     替换商品
        //     $('销量的选择器').attr('data-id',1)
        //   })
        // })
     </script>

    </ul>
  </div>
  
  <div class="xx">
    <ul>
      <li>上架时间</li>
      <li class="active">销量 ↓</li>
      <li>人气 ↓</li>
      <li>价格 ↓</li>
      <div class="cle"></div>
    </ul>
    <div class="jg">
     <form action="" method="post">
       <ul>
          <li class="qh"><input type="text" name="money"  size="7" placeholder="￥"/></li>
          <li class="zj">-</li>
          <li class="qh"><input type="text" name="money"  size="7" placeholder="￥"/></li>
          <div class="cle"></div>
       </ul>
     </form>
    </div>
    <form action="" method="post">
      <div class="ss"><input type="text" name="so"  size="16" placeholder="搜索关键字"/></div>
      <input class="button" type="submit" name="ss" value="确定"/>
    </form>
    <div class="zh">
      <ul>
        <li><a class="active" href="#">大图</a></li>
        <li><a href="javascript:vido(0);">列表</a></li>
        <div class="cle"></div>
      </ul>
    </div>
    <div class="cle"></div>
  </div>
  <div class="show">
  <ul class="goods_list">

    {foreach $data as $v}
     <li>
       <a href="{:url('GoodsDetail/detail', ['id'=>$v.id])}"><img {if $v.aaa eq ''}src="https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1593836702053&di=b0e958705fc094e26c746e8335afe48b&imgtype=0&src=http%3A%2F%2Fku.90sjimg.com%2Felement_origin_min_pic%2F17%2F07%2F19%2Fdc16de991c0edd8a740b2bd8c45fd0db.jpg"{else}src="__UP__/{$v.aaa}"{/if}   width="282" height="279"/></a>
       <p>
         <span class="s1">￥{$v.goods_price}</span>
         <span class="s2">￥{$v.goods_price}</span>
         <span class="s3">最近交易9笔</span>
       </p>
       <p class="p1">{$v.goods_name}</p>
     </li>
     {/foreach}
     <div class="cle"></div>
  </ul>
  </div>
  <div class="submenu">
        {$page|raw}
        <input type="text" name="page" value="1"/>
        <span>页</span>
        <input class="button" type="submit" name="confirm" value="确认">
   </div>
   <div class="cle"></div>   
</div>
<!--中间结束-->

<!--尾部开始-->
<div class="footer">
	<ul><!--合作伙伴logo-->
		<li><a href="javascript:vido(0);"><img src="__HOME__/images/partner01.gif"></a></li>
		<li><a href="javascript:vido(0);"><img src="__HOME__/images/partner02.gif"></a></li>
		<li><a href="javascript:vido(0);"><img src="__HOME__/images/partner03.gif"></a></li>
		<li><a href="javascript:vido(0);"><img src="__HOME__/images/partner04.gif"></a></li>
		<li><a href="javascript:vido(0);"><img src="__HOME__/images/partner05.gif"></a></li>
		<li><a href="javascript:vido(0);"><img src="__HOME__/images/partner06.gif"></a></li>
		<li><a href="javascript:vido(0);"><img src="__HOME__/images/partner07.gif"></a></li>
		<p class="cle"></p>
	</ul>
	<div><!--底部文字-->
		<a href="javascript:vido(0);">苏ICP备14039882号-4</a><span>|</span>
		<a href="javascript:vido(0);">苏B1-20150021</a><span>|</span>
		<a href="javascript:vido(0);">无锡Bombin网络科技有限公司</a>
	</div>
</div>
<!--尾部结束-->
</body>
<script src="__HOME__/js/leftsidebar.js"></script>
 
</html>

